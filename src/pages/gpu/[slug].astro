---
import BaseLayout from '../../layouts/BaseLayout.astro';
import BenchmarkChart from '../../components/BenchmarkChart.astro';
import GPUCard from '../../components/GPUCard.astro';
import { gpus, getGPUBySlug, getSimilarGPUs, getBrandColor, getTierLabel, formatPrice, getTopComparisons } from '../../data/gpus';
import type { GPU } from '../../data/gpus';

export function getStaticPaths() {
  return gpus.map(gpu => ({
    params: { slug: gpu.slug },
    props: { gpu },
  }));
}

const { gpu } = Astro.props as { gpu: GPU };
const brandColor = getBrandColor(gpu.brand);
const similarGPUs = getSimilarGPUs(gpu, 4);
const relatedComparisons = getTopComparisons().filter(c => c.gpu1.slug === gpu.slug || c.gpu2.slug === gpu.slug).slice(0, 4);

const today = new Date().toISOString().split('T')[0];

const schema = {
  "@context": "https://schema.org",
  "@type": "Product",
  "name": gpu.name,
  "description": gpu.summary,
  "brand": { "@type": "Brand", "name": gpu.brand },
  "category": "Graphics Cards",
  "offers": {
    "@type": "Offer",
    "price": gpu.currentPrice,
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": ((gpu.ratings.gaming + gpu.ratings.valueForMoney + gpu.ratings.powerEfficiency) / 3).toFixed(1),
    "bestRating": "10",
    "worstRating": "1",
    "ratingCount": "1"
  }
};

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": `Is the ${gpu.name} good for gaming?`,
      "acceptedAnswer": {
        "@type": "Answer",
        "text": `The ${gpu.name} scores ${gpu.benchmarks.gaming1080p}/100 at 1080p, ${gpu.benchmarks.gaming1440p}/100 at 1440p, and ${gpu.benchmarks.gaming4k}/100 at 4K in our gaming benchmarks. It is ${gpu.tier === 'flagship' || gpu.tier === 'high-end' ? 'excellent' : gpu.tier === 'mid-range' ? 'very good' : 'suitable'} for gaming. ${gpu.bestFor.join('. ')}.`
      }
    },
    {
      "@type": "Question",
      "name": `What is the price of the ${gpu.name}?`,
      "acceptedAnswer": {
        "@type": "Answer",
        "text": `The ${gpu.name} has an MSRP of ${formatPrice(gpu.msrp)} and is currently available for approximately ${formatPrice(gpu.currentPrice)}.`
      }
    },
    {
      "@type": "Question",
      "name": `How much VRAM does the ${gpu.name} have?`,
      "acceptedAnswer": {
        "@type": "Answer",
        "text": `The ${gpu.name} has ${gpu.vram}GB of ${gpu.vramType} memory on a ${gpu.busWidth}-bit memory bus.`
      }
    },
    {
      "@type": "Question",
      "name": `What PSU do I need for the ${gpu.name}?`,
      "acceptedAnswer": {
        "@type": "Answer",
        "text": `The ${gpu.name} has a TDP of ${gpu.tdp}W and requires a ${gpu.recommendedPSU}W power supply. It uses a ${gpu.powerConnector} power connector.`
      }
    }
  ]
};
---

<BaseLayout
  title={`${gpu.name} Review, Specs & Benchmarks (2026) | GraphicCards.com`}
  description={`${gpu.name} â€” ${gpu.vram}GB ${gpu.vramType}, ${gpu.architecture} architecture. Detailed specs, gaming benchmarks at 1080p/1440p/4K, ray tracing performance, and buying guide. Currently ${formatPrice(gpu.currentPrice)}.`}
  canonical={`/gpu/${gpu.slug}`}
  type="article"
  modifiedDate={today}
  schema={schema}
>
  <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />

  <article class="max-w-5xl mx-auto px-6 py-12">
    <!-- Breadcrumb -->
    <nav class="flex items-center gap-2 text-sm text-gray-500 mb-8">
      <a href="/" class="hover:text-gray-300 transition-colors">Home</a>
      <span>/</span>
      <a href="/gpus" class="hover:text-gray-300 transition-colors">Graphics Cards</a>
      <span>/</span>
      <span class="text-gray-300">{gpu.name}</span>
    </nav>

    <!-- Header -->
    <header class="mb-12">
      <div class="flex flex-wrap items-center gap-3 mb-4">
        <span class="text-xs font-bold uppercase tracking-wider px-3 py-1.5 rounded-full" style={`background: ${brandColor}20; color: ${brandColor};`}>
          {gpu.brand}
        </span>
        <span class="text-xs font-medium text-gray-500 px-3 py-1.5 bg-white/[0.03] border border-white/[0.06] rounded-full">
          {getTierLabel(gpu.tier)}
        </span>
        <span class="text-xs font-medium text-gray-500 px-3 py-1.5 bg-white/[0.03] border border-white/[0.06] rounded-full">
          {gpu.architecture}
        </span>
        <span class="text-xs font-medium text-gray-500 px-3 py-1.5 bg-white/[0.03] border border-white/[0.06] rounded-full">
          Released {gpu.releaseDate}
        </span>
      </div>

      <h1 class="font-display font-extrabold text-4xl md:text-5xl tracking-tight mb-4">
        {gpu.name}
      </h1>

      <p class="text-lg text-gray-400 leading-relaxed max-w-3xl">
        {gpu.summary}
      </p>

      <div class="flex flex-wrap gap-6 mt-8">
        <div>
          <div class="text-sm text-gray-500">Current Price</div>
          <div class="font-display font-bold text-2xl text-white">{formatPrice(gpu.currentPrice)}</div>
          {gpu.currentPrice !== gpu.msrp && (
            <div class="text-xs text-gray-500">MSRP: {formatPrice(gpu.msrp)}</div>
          )}
        </div>
        <div class="border-l border-white/10 pl-6">
          <div class="text-sm text-gray-500">VRAM</div>
          <div class="font-display font-bold text-2xl text-white">{gpu.vram}GB {gpu.vramType}</div>
          <div class="text-xs text-gray-500">{gpu.busWidth}-bit bus</div>
        </div>
        <div class="border-l border-white/10 pl-6">
          <div class="text-sm text-gray-500">TDP</div>
          <div class="font-display font-bold text-2xl text-white">{gpu.tdp}W</div>
          <div class="text-xs text-gray-500">{gpu.recommendedPSU}W PSU rec.</div>
        </div>
        <div class="border-l border-white/10 pl-6">
          <div class="text-sm text-gray-500">Boost Clock</div>
          <div class="font-display font-bold text-2xl text-white">{gpu.boostClock} MHz</div>
          <div class="text-xs text-gray-500">Base: {gpu.baseClock} MHz</div>
        </div>
      </div>
    </header>

    <!-- Full Specifications Table -->
    <section class="mb-16">
      <h2 class="font-display font-bold text-2xl mb-6">Full Specifications</h2>
      <div class="card overflow-hidden">
        <table class="w-full text-sm">
          <tbody>
            <tr class="border-b border-white/5">
              <td class="px-6 py-4 text-gray-500 font-medium w-1/3">Architecture</td>
              <td class="px-6 py-4 text-white">{gpu.architecture}</td>
            </tr>
            <tr class="border-b border-white/5 bg-white/[0.01]">
              <td class="px-6 py-4 text-gray-500 font-medium">VRAM</td>
              <td class="px-6 py-4 text-white">{gpu.vram}GB {gpu.vramType}</td>
            </tr>
            <tr class="border-b border-white/5">
              <td class="px-6 py-4 text-gray-500 font-medium">Memory Bus</td>
              <td class="px-6 py-4 text-white">{gpu.busWidth}-bit</td>
            </tr>
            <tr class="border-b border-white/5 bg-white/[0.01]">
              <td class="px-6 py-4 text-gray-500 font-medium">Base Clock</td>
              <td class="px-6 py-4 text-white">{gpu.baseClock} MHz</td>
            </tr>
            <tr class="border-b border-white/5">
              <td class="px-6 py-4 text-gray-500 font-medium">Boost Clock</td>
              <td class="px-6 py-4 text-white">{gpu.boostClock} MHz</td>
            </tr>
            {gpu.cudaCores && (
              <tr class="border-b border-white/5 bg-white/[0.01]">
                <td class="px-6 py-4 text-gray-500 font-medium">CUDA Cores</td>
                <td class="px-6 py-4 text-white">{gpu.cudaCores.toLocaleString()}</td>
              </tr>
            )}
            {gpu.streamProcessors && (
              <tr class="border-b border-white/5 bg-white/[0.01]">
                <td class="px-6 py-4 text-gray-500 font-medium">Stream Processors</td>
                <td class="px-6 py-4 text-white">{gpu.streamProcessors.toLocaleString()}</td>
              </tr>
            )}
            {gpu.xeCores && (
              <tr class="border-b border-white/5 bg-white/[0.01]">
                <td class="px-6 py-4 text-gray-500 font-medium">Xe Cores</td>
                <td class="px-6 py-4 text-white">{gpu.xeCores}</td>
              </tr>
            )}
            {gpu.rayTracingCores && (
              <tr class="border-b border-white/5">
                <td class="px-6 py-4 text-gray-500 font-medium">Ray Tracing Cores</td>
                <td class="px-6 py-4 text-white">{gpu.rayTracingCores}</td>
              </tr>
            )}
            {gpu.tensorCores && (
              <tr class="border-b border-white/5 bg-white/[0.01]">
                <td class="px-6 py-4 text-gray-500 font-medium">Tensor Cores</td>
                <td class="px-6 py-4 text-white">{gpu.tensorCores}</td>
              </tr>
            )}
            <tr class="border-b border-white/5">
              <td class="px-6 py-4 text-gray-500 font-medium">TDP</td>
              <td class="px-6 py-4 text-white">{gpu.tdp}W</td>
            </tr>
            <tr class="border-b border-white/5 bg-white/[0.01]">
              <td class="px-6 py-4 text-gray-500 font-medium">Recommended PSU</td>
              <td class="px-6 py-4 text-white">{gpu.recommendedPSU}W</td>
            </tr>
            <tr class="border-b border-white/5">
              <td class="px-6 py-4 text-gray-500 font-medium">Power Connector</td>
              <td class="px-6 py-4 text-white">{gpu.powerConnector}</td>
            </tr>
            <tr class="border-b border-white/5 bg-white/[0.01]">
              <td class="px-6 py-4 text-gray-500 font-medium">Display Outputs</td>
              <td class="px-6 py-4 text-white">{gpu.displayOutputs}</td>
            </tr>
            <tr>
              <td class="px-6 py-4 text-gray-500 font-medium">Max Resolution</td>
              <td class="px-6 py-4 text-white">{gpu.maxResolution}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Benchmarks -->
    <section class="mb-16">
      <h2 class="font-display font-bold text-2xl mb-6">Benchmark Performance</h2>
      <div class="card p-8 space-y-6">
        <BenchmarkChart label="1080p Gaming" value={gpu.benchmarks.gaming1080p} color="from-accent-indigo to-accent-cyan" />
        <BenchmarkChart label="1440p Gaming" value={gpu.benchmarks.gaming1440p} color="from-accent-purple to-accent-indigo" />
        <BenchmarkChart label="4K Gaming" value={gpu.benchmarks.gaming4k} color="from-accent-cyan to-accent-emerald" />
        <BenchmarkChart label="Ray Tracing" value={gpu.benchmarks.rayTracing} color="from-yellow-500 to-orange-500" />
        <BenchmarkChart label="Productivity" value={gpu.benchmarks.productivity} color="from-accent-emerald to-accent-cyan" />
        <BenchmarkChart label="AI / ML Workloads" value={gpu.benchmarks.aiMl} color="from-pink-500 to-accent-purple" />
      </div>
    </section>

    <!-- Pros & Cons -->
    <section class="mb-16">
      <h2 class="font-display font-bold text-2xl mb-6">Pros &amp; Cons</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
        <div class="card p-6">
          <h3 class="font-display font-semibold text-accent-emerald mb-4 flex items-center gap-2">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            Pros
          </h3>
          <ul class="space-y-2">
            {gpu.pros.map(pro => (
              <li class="flex items-start gap-2 text-sm text-gray-300">
                <span class="text-accent-emerald mt-0.5 shrink-0">+</span>
                {pro}
              </li>
            ))}
          </ul>
        </div>
        <div class="card p-6">
          <h3 class="font-display font-semibold text-red-400 mb-4 flex items-center gap-2">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
            Cons
          </h3>
          <ul class="space-y-2">
            {gpu.cons.map(con => (
              <li class="flex items-start gap-2 text-sm text-gray-300">
                <span class="text-red-400 mt-0.5 shrink-0">-</span>
                {con}
              </li>
            ))}
          </ul>
        </div>
      </div>
    </section>

    <!-- Best For -->
    <section class="mb-16">
      <h2 class="font-display font-bold text-2xl mb-6">Who Is the {gpu.name} Best For?</h2>
      <div class="flex flex-wrap gap-3">
        {gpu.bestFor.map(useCase => (
          <span class="px-4 py-2 bg-accent-indigo/10 border border-accent-indigo/20 text-accent-indigo text-sm font-medium rounded-full">
            {useCase}
          </span>
        ))}
      </div>
    </section>

    <!-- FAQ Section (GEO optimized) -->
    <section class="mb-16">
      <h2 class="font-display font-bold text-2xl mb-6">Frequently Asked Questions</h2>
      <div class="space-y-4">
        <div class="card p-6">
          <h3 class="font-semibold text-white mb-2">Is the {gpu.name} good for gaming?</h3>
          <p class="text-gray-400 text-sm leading-relaxed">
            The {gpu.name} scores {gpu.benchmarks.gaming1080p}/100 at 1080p, {gpu.benchmarks.gaming1440p}/100 at 1440p, and {gpu.benchmarks.gaming4k}/100 at 4K in our gaming benchmarks. It is best suited for {gpu.bestFor.slice(0, 2).join(' and ').toLowerCase()}.
          </p>
        </div>
        <div class="card p-6">
          <h3 class="font-semibold text-white mb-2">What is the price of the {gpu.name}?</h3>
          <p class="text-gray-400 text-sm leading-relaxed">
            The {gpu.name} has an MSRP of {formatPrice(gpu.msrp)} and is currently available for approximately {formatPrice(gpu.currentPrice)}.
          </p>
        </div>
        <div class="card p-6">
          <h3 class="font-semibold text-white mb-2">How much VRAM does the {gpu.name} have?</h3>
          <p class="text-gray-400 text-sm leading-relaxed">
            The {gpu.name} has {gpu.vram}GB of {gpu.vramType} memory on a {gpu.busWidth}-bit memory bus, providing {gpu.vram >= 16 ? 'ample' : gpu.vram >= 12 ? 'sufficient' : 'adequate'} memory for {gpu.vram >= 16 ? '4K gaming, content creation, and AI workloads' : gpu.vram >= 12 ? '1440p gaming and most creative workflows' : '1080p gaming and everyday use'}.
          </p>
        </div>
        <div class="card p-6">
          <h3 class="font-semibold text-white mb-2">What power supply do I need for the {gpu.name}?</h3>
          <p class="text-gray-400 text-sm leading-relaxed">
            The {gpu.name} has a TDP of {gpu.tdp}W. We recommend a minimum {gpu.recommendedPSU}W power supply. It uses a {gpu.powerConnector} power connector.
          </p>
        </div>
      </div>
    </section>

    <!-- Related Comparisons -->
    {relatedComparisons.length > 0 && (
      <section class="mb-16">
        <h2 class="font-display font-bold text-2xl mb-6">Compare the {gpu.name}</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          {relatedComparisons.map(comp => (
            <a href={`/compare/${comp.slug}`} class="card p-5 flex items-center justify-between group">
              <span class="text-sm text-gray-300 group-hover:text-white transition-colors">
                {comp.gpu1.name.replace(/NVIDIA |AMD |Intel /, '')} vs {comp.gpu2.name.replace(/NVIDIA |AMD |Intel /, '')}
              </span>
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600 group-hover:text-accent-indigo transition-colors" stroke-linecap="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
            </a>
          ))}
        </div>
      </section>
    )}

    <!-- Similar GPUs -->
    <section>
      <h2 class="font-display font-bold text-2xl mb-6">Similar Graphics Cards</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">
        {similarGPUs.map(g => <GPUCard gpu={g} />)}
      </div>
    </section>
  </article>
</BaseLayout>
