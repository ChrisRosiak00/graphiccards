---
import BaseLayout from '../../layouts/BaseLayout.astro';
import BenchmarkChart from '../../components/BenchmarkChart.astro';
import GPUCard from '../../components/GPUCard.astro';
import { gpus, getSimilarGPUs, getBrandColor, getTierLabel, formatPrice, getTopComparisons } from '../../data/gpus';
import type { GPU } from '../../data/gpus';

export function getStaticPaths() {
  return gpus.map(gpu => ({ params: { slug: gpu.slug }, props: { gpu } }));
}
const { gpu } = Astro.props as { gpu: GPU };
const brandColor = getBrandColor(gpu.brand);
const similarGPUs = getSimilarGPUs(gpu, 4);
const relatedComparisons = getTopComparisons().filter(c => c.gpu1.slug === gpu.slug || c.gpu2.slug === gpu.slug).slice(0, 4);
const today = new Date().toISOString().split('T')[0];

const schema = {
  "@context": "https://schema.org",
  "@type": "Product",
  "name": gpu.name,
  "description": gpu.summary,
  "brand": { "@type": "Brand", "name": gpu.brand },
  "category": "Graphics Cards",
  "offers": { "@type": "Offer", "price": gpu.currentPrice, "priceCurrency": "USD", "availability": "https://schema.org/InStock" }
};
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    { "@type": "Question", "name": `Is the ${gpu.name} good for gaming?`, "acceptedAnswer": { "@type": "Answer", "text": `The ${gpu.name} scores ${gpu.benchmarks.gaming1080p}/100 at 1080p, ${gpu.benchmarks.gaming1440p}/100 at 1440p, and ${gpu.benchmarks.gaming4k}/100 at 4K. Best for ${gpu.bestFor.slice(0,2).join(' and ').toLowerCase()}.` } },
    { "@type": "Question", "name": `What is the price of the ${gpu.name}?`, "acceptedAnswer": { "@type": "Answer", "text": `MSRP of ${formatPrice(gpu.msrp)}, currently ~${formatPrice(gpu.currentPrice)}.` } },
    { "@type": "Question", "name": `How much VRAM does the ${gpu.name} have?`, "acceptedAnswer": { "@type": "Answer", "text": `${gpu.vram}GB ${gpu.vramType} on a ${gpu.busWidth}-bit bus.` } },
    { "@type": "Question", "name": `What PSU do I need for the ${gpu.name}?`, "acceptedAnswer": { "@type": "Answer", "text": `TDP ${gpu.tdp}W, recommended ${gpu.recommendedPSU}W PSU. Uses ${gpu.powerConnector}.` } }
  ]
};
---

<BaseLayout title={`${gpu.name} Review, Specs & Benchmarks (2026) | GraphicCards.com`} description={`${gpu.name} â€” ${gpu.vram}GB ${gpu.vramType}, ${gpu.architecture}. Specs, gaming benchmarks, ray tracing, pricing. Currently ${formatPrice(gpu.currentPrice)}.`} canonical={`/gpu/${gpu.slug}`} type="article" modifiedDate={today} schema={schema}>
  <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />

  <article class="max-w-5xl mx-auto px-6 py-12">
    <nav class="breadcrumb-nav flex items-center gap-2 text-sm text-gray-500 mb-8">
      <a href="/" class="hover:text-gray-300 transition-colors shrink-0">Home</a><span class="shrink-0">/</span>
      <a href="/gpus" class="hover:text-gray-300 transition-colors shrink-0">GPUs</a><span class="shrink-0">/</span>
      <span class="text-gray-300 truncate">{gpu.name}</span>
    </nav>

    <header class="mb-12">
      <div class="flex flex-wrap items-center gap-3 mb-4">
        <span class="text-xs font-bold uppercase tracking-wider px-3 py-1.5 rounded-full" style={`background: ${brandColor}20; color: ${brandColor};`}>{gpu.brand}</span>
        <span class="text-xs font-medium text-gray-500 px-3 py-1.5 bg-white/[0.03] border border-white/[0.06] rounded-full">{getTierLabel(gpu.tier)}</span>
        <span class="text-xs font-medium text-gray-500 px-3 py-1.5 bg-white/[0.03] border border-white/[0.06] rounded-full">{gpu.architecture}</span>
      </div>
      <h1 class="font-display font-extrabold text-4xl md:text-5xl tracking-tight mb-4">{gpu.name}</h1>
      <p class="text-lg text-gray-400 leading-relaxed max-w-3xl">{gpu.summary}</p>
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-6 mt-8">
        <div><div class="text-sm text-gray-500">Price</div><div class="font-display font-bold text-xl sm:text-2xl text-white">{formatPrice(gpu.currentPrice)}</div>{gpu.currentPrice !== gpu.msrp && <div class="text-xs text-gray-500">MSRP: {formatPrice(gpu.msrp)}</div>}</div>
        <div><div class="text-sm text-gray-500">VRAM</div><div class="font-display font-bold text-xl sm:text-2xl text-white">{gpu.vram}GB {gpu.vramType}</div><div class="text-xs text-gray-500">{gpu.busWidth}-bit bus</div></div>
        <div><div class="text-sm text-gray-500">TDP</div><div class="font-display font-bold text-xl sm:text-2xl text-white">{gpu.tdp}W</div></div>
        <div><div class="text-sm text-gray-500">Boost Clock</div><div class="font-display font-bold text-xl sm:text-2xl text-white">{gpu.boostClock} MHz</div></div>
      </div>
    </header>

    <!-- Specs Table -->
    <section class="mb-16">
      <h2 class="font-display font-bold text-2xl mb-6">Full Specifications</h2>
      <div class="card overflow-hidden table-scroll">
        <table class="w-full text-sm">
          <tbody>
            {[
              ['Architecture', gpu.architecture],
              ['VRAM', `${gpu.vram}GB ${gpu.vramType}`],
              ['Memory Bus', `${gpu.busWidth}-bit`],
              ['Base Clock', `${gpu.baseClock} MHz`],
              ['Boost Clock', `${gpu.boostClock} MHz`],
              ...(gpu.cudaCores ? [['CUDA Cores', gpu.cudaCores.toLocaleString()]] : []),
              ...(gpu.streamProcessors ? [['Stream Processors', gpu.streamProcessors.toLocaleString()]] : []),
              ...(gpu.xeCores ? [['Xe Cores', String(gpu.xeCores)]] : []),
              ...(gpu.rayTracingCores ? [['Ray Tracing Cores', String(gpu.rayTracingCores)]] : []),
              ...(gpu.tensorCores ? [['Tensor Cores', String(gpu.tensorCores)]] : []),
              ['TDP', `${gpu.tdp}W`],
              ['Recommended PSU', `${gpu.recommendedPSU}W`],
              ['Power Connector', gpu.powerConnector],
              ['Display Outputs', gpu.displayOutputs],
              ['Max Resolution', gpu.maxResolution],
            ].map(([label, value], i) => (
              <tr class={`border-b border-white/5 ${i % 2 ? 'bg-white/[0.01]' : ''}`}>
                <td class="px-6 py-4 text-gray-500 font-medium w-1/3">{label}</td>
                <td class="px-6 py-4 text-white">{value}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </section>

    <!-- Benchmarks -->
    <section class="mb-16">
      <h2 class="font-display font-bold text-2xl mb-6">Benchmark Performance</h2>
      <div class="card p-4 sm:p-8 space-y-6">
        <BenchmarkChart label="1080p Gaming" value={gpu.benchmarks.gaming1080p} color="from-accent-indigo to-accent-cyan" />
        <BenchmarkChart label="1440p Gaming" value={gpu.benchmarks.gaming1440p} color="from-accent-purple to-accent-indigo" />
        <BenchmarkChart label="4K Gaming" value={gpu.benchmarks.gaming4k} color="from-accent-cyan to-accent-emerald" />
        <BenchmarkChart label="Ray Tracing" value={gpu.benchmarks.rayTracing} color="from-yellow-500 to-orange-500" />
        <BenchmarkChart label="Productivity" value={gpu.benchmarks.productivity} color="from-accent-emerald to-accent-cyan" />
        <BenchmarkChart label="AI / ML Workloads" value={gpu.benchmarks.aiMl} color="from-pink-500 to-accent-purple" />
      </div>
    </section>

    <!-- Pros & Cons -->
    <section class="mb-16">
      <h2 class="font-display font-bold text-2xl mb-6">Pros &amp; Cons</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
        <div class="card p-6">
          <h3 class="font-display font-semibold text-accent-emerald mb-4">Pros</h3>
          <ul class="space-y-2">{gpu.pros.map(pro => <li class="flex items-start gap-2 text-sm text-gray-300"><span class="text-accent-emerald mt-0.5 shrink-0">+</span>{pro}</li>)}</ul>
        </div>
        <div class="card p-6">
          <h3 class="font-display font-semibold text-red-400 mb-4">Cons</h3>
          <ul class="space-y-2">{gpu.cons.map(con => <li class="flex items-start gap-2 text-sm text-gray-300"><span class="text-red-400 mt-0.5 shrink-0">-</span>{con}</li>)}</ul>
        </div>
      </div>
    </section>

    <!-- Best For -->
    <section class="mb-16">
      <h2 class="font-display font-bold text-2xl mb-6">Best For</h2>
      <div class="flex flex-wrap gap-3">
        {gpu.bestFor.map(use => <span class="px-4 py-2 bg-accent-indigo/10 border border-accent-indigo/20 text-accent-indigo text-sm font-medium rounded-full">{use}</span>)}
      </div>
    </section>

    <!-- FAQ -->
    <section class="mb-16">
      <h2 class="font-display font-bold text-2xl mb-6">Frequently Asked Questions</h2>
      <div class="space-y-4">
        <div class="card p-6"><h3 class="font-semibold text-white mb-2">Is the {gpu.name} good for gaming?</h3><p class="text-gray-400 text-sm leading-relaxed">Scores {gpu.benchmarks.gaming1080p}/100 at 1080p, {gpu.benchmarks.gaming1440p}/100 at 1440p, {gpu.benchmarks.gaming4k}/100 at 4K. Best for {gpu.bestFor.slice(0,2).join(' and ').toLowerCase()}.</p></div>
        <div class="card p-6"><h3 class="font-semibold text-white mb-2">What is the price?</h3><p class="text-gray-400 text-sm leading-relaxed">MSRP {formatPrice(gpu.msrp)}, currently ~{formatPrice(gpu.currentPrice)}.</p></div>
        <div class="card p-6"><h3 class="font-semibold text-white mb-2">How much VRAM?</h3><p class="text-gray-400 text-sm leading-relaxed">{gpu.vram}GB {gpu.vramType} on a {gpu.busWidth}-bit bus.</p></div>
        <div class="card p-6"><h3 class="font-semibold text-white mb-2">What PSU do I need?</h3><p class="text-gray-400 text-sm leading-relaxed">TDP {gpu.tdp}W. Recommended {gpu.recommendedPSU}W PSU. Uses {gpu.powerConnector}.</p></div>
      </div>
    </section>

    <!-- Related Comparisons -->
    {relatedComparisons.length > 0 && (
      <section class="mb-16">
        <h2 class="font-display font-bold text-2xl mb-6">Compare the {gpu.name}</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          {relatedComparisons.map(comp => (
            <a href={`/compare/${comp.slug}`} class="card p-5 flex items-center justify-between group">
              <span class="text-sm text-gray-300 group-hover:text-white transition-colors">{comp.gpu1.name.replace(/NVIDIA |AMD |Intel /, '')} vs {comp.gpu2.name.replace(/NVIDIA |AMD |Intel /, '')}</span>
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600 group-hover:text-accent-indigo transition-colors" stroke-linecap="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
            </a>
          ))}
        </div>
      </section>
    )}

    <!-- Similar GPUs -->
    <section>
      <h2 class="font-display font-bold text-2xl mb-6">Similar Graphics Cards</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">
        {similarGPUs.map(g => <GPUCard gpu={g} />)}
      </div>
    </section>
  </article>
</BaseLayout>
